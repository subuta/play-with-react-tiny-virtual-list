{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/fetch.js","webpack:///./src/hocs/mapVh.js","webpack:///./src/components/Images.js","webpack:///./src/components/Pokemons/index.js","webpack:///./src/components/Pokemons/Pokemon.js","webpack:///./src/utils/promise.js","webpack:///./src/hocs/withMeasure.js","webpack:///./src/components/LoadMore.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","cache","LRU","max","maxAge","__webpack_exports__","_ref","_asyncToGenerator","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","url","wrap","_context","prev","next","has","fetch","then","res","json","sent","set","abrupt","stop","this","_x","arguments","compose","withState","withProps","setVh","listen","listener","_","debounce","e","innerHeight","addEventListener","removeEventListener","lifecycle","componentDidMount","_componentDidMount","unlisten","props","componentWillUnmount","hasLargeScreen","innerWidth","enhance","hot","mapVh","photos","map","photo","randomSize","random","setPhotos","withPropsOnChange","nextProps","renderItem","_ref2","style","index","react__WEBPACK_IMPORTED_MODULE_1___default","createElement","className","_objectSpread","background","position","top","left","padding","author","href","post_url","target","src","concat","id","alt","_ref3","vh","Fragment","react_tiny_virtual_list__WEBPACK_IMPORTED_MODULE_4__","width","height","itemCount","itemSize","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","to","isEqual","location","query","lang","qs","parse","search","split","withStateHandlers","pokemons","scrollToIndex","draftScrollToIndex","setPokemons","setDraftScrollToIndex","setScrollToIndex","isNaN","Number","response","results","pokemon","match","withHandlers","itemSizesCache","listRef","refresh","noop","setListRef","ref","requestAnimationFrame","recomputeSizes","setItemSizesCache","getItemSizesCache","isPokemonsChanged","isQueryChanged","_Pokemon__WEBPACK_IMPORTED_MODULE_8__","onMeasure","_ref4","getItemSizes","filled","fill","Array","merge","nextLang","onSubmit","preventDefault","marginRight","type","onChange","marginLeft","onClick","overscanCount","getPokemonDetail","Promise","resolve","info","speciesUrl","spec","randomLang","getLocaled","names","frontImage","backImage","flavorTexts","sample","collection","grouped","groupBy","picked","pick","transform","values","first","flavor_text_entries","withMeasure","_this$props","setDetail","observe","promise","detail","cancel","branch","renderComponent","identity","_props$detail","setMeasureRef","_detail$names","_detail$flavorTexts","flavorTextEntry","flavor_text","version","color","margin","wordBreak","whiteSpace","bluebird__WEBPACK_IMPORTED_MODULE_0__","bluebird__WEBPACK_IMPORTED_MODULE_0___default","config","cancellation","_ref2$onMeasure","unobserve","size","ro","ResizeObserver","entries","contentRect","right","bottom","imgs","querySelectorAll","img","onload","isLoaded","LoadMore","rows","virtualRowsCount","overScanCount","initialScrollToIndex","prependRows","state","nextRows","_toConsumableArray","getVirtualIndex","lastArg","startIndex","stopIndex","scrollDirection","compareScroll","arg","currentIndex","visibleCurrentIndex","leading","trailing","onLoadMore","_ref5","isAtFirst","delay","onItemsRendered","_ref6","_props$compareScroll","IsAtFirstOfRows","IsAtLastOfRows","isAtLast","_ref7","row","react__WEBPACK_IMPORTED_MODULE_0___default","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_0__","react_dom__WEBPACK_IMPORTED_MODULE_1__","react_dom__WEBPACK_IMPORTED_MODULE_1___default","react_router_dom__WEBPACK_IMPORTED_MODULE_4__","react_router_dom__WEBPACK_IMPORTED_MODULE_5__","_components_Images__WEBPACK_IMPORTED_MODULE_6__","_components_Pokemons__WEBPACK_IMPORTED_MODULE_7__","_components_LoadMore__WEBPACK_IMPORTED_MODULE_8__","app","exact","from","path","component","Images","Pokemons","ReactDOM","render","document","querySelector"],"mappings":"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","file":"main.a172174a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/play-with-react-tiny-virtual-list/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([39,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import LRU from 'lru-cache'\n\nconst cache = new LRU({\n  max: 500,\n  maxAge: 1000 * 60 * 60 // 1h\n})\n\nexport default async (url) => {\n  if (!cache.has(url)) {\n    const result = await window.fetch(url).then(res => res.json())\n    cache.set(url, result)\n  }\n  return cache.get(url)\n}\n","import {\n  compose,\n  lifecycle,\n  withState,\n  withProps,\n} from 'recompose'\nimport _ from 'lodash'\n\nexport default compose(\n  withState('vh', 'setVh', 0),\n  withProps(({ setVh }) => ({\n    listen: () => {\n      const listener = _.debounce((e) => setVh(window.innerHeight), 300)\n\n      window.addEventListener('resize', listener)\n\n      // Load once.\n      listener()\n\n      return () => window.removeEventListener('resize', listener)\n    }\n  })),\n  lifecycle({\n    async componentDidMount () {\n      this.unlisten = this.props.listen()\n    },\n\n    componentWillUnmount () {\n      this.unlisten && this.unlisten()\n    }\n  }),\n)","// App.js\nimport React from 'react'\nimport { hot } from 'react-hot-loader'\n\nimport { Link } from 'react-router-dom'\nimport VirtualList from 'react-tiny-virtual-list'\n\nimport fetch from '../utils/fetch'\n\nimport _ from 'lodash'\n\nimport {\n  compose,\n  lifecycle,\n  withState,\n  withPropsOnChange\n} from 'recompose'\n\nimport mapVh from '../hocs/mapVh'\n\nconst hasLargeScreen = window.innerWidth >= 576\n\nconst enhance = compose(\n  hot(module),\n  mapVh,\n  withState('photos', 'setPhotos', []),\n  lifecycle({\n    async componentDidMount () {\n      let photos = await fetch('https://picsum.photos/list')\n\n      photos = _.map(photos, (photo) => {\n        if (hasLargeScreen) {\n          photo.randomSize = _.random(3, 8) * 100\n        } else {\n          photo.randomSize = _.random(1, 4) * 100\n        }\n        return photo\n      })\n\n      this.props.setPhotos(photos)\n    }\n  }),\n  withPropsOnChange(\n    (props, nextProps) => props.photos.length !== nextProps.photos.length,\n    ({ photos }) => {\n      return {\n        renderItem: ({ style, index }) => {\n          const photo = photos[index]\n          return (\n            <div className=\"Row\" style={{ ...style }} key={index}>\n              <span style={{ background: 'white', position: 'absolute', top: 0, left: 0, padding: '0 8px' }}>\n                Row #{index} By {photo.author}\n                <small>randomSize={photo.randomSize}</small>\n              </span>\n              <a href={photo.post_url} target=\"_blank\">\n                <img src={`https://picsum.photos/${photo.randomSize}?image=${photo.id}`} alt=\"\" />\n              </a>\n            </div>\n          )\n        }\n      }\n    }\n  )\n)\n\nconst Images = ({ photos, renderItem, vh }) => {\n  return (\n    <>\n      <VirtualList\n        width='100vw'\n        height={vh}\n        itemCount={photos.length}\n        renderItem={renderItem}\n        itemSize={(index) => photos[index].randomSize}\n      />\n\n      <footer>\n        <span>\n          <Link to=\"/pokemons\">/pokemons</Link> |&nbsp;\n          <Link to=\"/load-more\">/load-more</Link>\n        </span>\n\n        <span className=\"c-comment\">SEE: <a href=\"https://picsum.photos/\" target='_blank'>Lorem Picsum</a> for more images.</span>\n      </footer>\n    </>\n  )\n}\n\nexport default enhance(Images)","// App.js\nimport React from 'react'\nimport { hot } from 'react-hot-loader'\n\nimport { Link } from 'react-router-dom'\nimport VirtualList from 'react-tiny-virtual-list'\nimport qs from 'qs'\n\nimport fetch from '../../utils/fetch'\n\nimport _ from 'lodash'\n\nimport Pokemon from './Pokemon'\n\nimport {\n  compose,\n  lifecycle,\n  withHandlers,\n  withPropsOnChange,\n  withStateHandlers\n} from 'recompose'\n\nimport mapVh from '../../hocs/mapVh'\n\nconst POKE_URL_ID_REGEX = 'https://pokeapi.co/api/v2/pokemon/([0-9]+)/'\n\nconst enhance = compose(\n  hot(module),\n  mapVh,\n  withPropsOnChange(\n    (props, nextProps) => !_.isEqual(props.location, nextProps.location),\n    ({ location }) => {\n      const query = qs.parse(location.search.split('?')[1])\n      return {\n        query: {\n          lang: query.lang || 'en'\n        }\n      }\n    }\n  ),\n  withStateHandlers(\n    () => ({\n      pokemons: [],\n      scrollToIndex: null,\n      draftScrollToIndex: ''\n    }),\n    {\n      setPokemons: () => (pokemons) => ({ pokemons }),\n      setDraftScrollToIndex: () => (e) => ({ draftScrollToIndex: e.target.value }),\n      setScrollToIndex: () => (value) => {\n        if (value === '') return { scrollToIndex: null }\n        return {\n          scrollToIndex: _.isNaN(Number(value)) ? null : Number(value) // For array.\n        }\n      }\n    }\n  ),\n  lifecycle({\n    async componentDidMount () {\n      let response = await fetch('https://pokeapi.co/api/v2/pokemon/')\n\n      const pokemons = _.map(response.results, pokemon => {\n        pokemon.id = pokemon.url.match(POKE_URL_ID_REGEX)[1]\n        return pokemon\n      })\n\n      this.props.setPokemons(pokemons)\n    }\n  }),\n  withHandlers(() => {\n    let itemSizesCache = []\n    let listRef = null\n    let refresh = _.noop\n\n    return {\n      setListRef: () => (ref) => {\n        listRef = ref\n\n        if (listRef) {\n          refresh = () => requestAnimationFrame(() => listRef && listRef.recomputeSizes())\n        }\n      },\n\n      setItemSizesCache: () => (index, height) => {\n        itemSizesCache[index] = height\n        refresh()\n      },\n\n      getItemSizesCache: () => () => itemSizesCache\n    }\n  }),\n  withPropsOnChange(\n    (props, nextProps) => {\n      const isPokemonsChanged = props.pokemons.length !== nextProps.pokemons.length\n      const isQueryChanged = !_.isEqual(props.query, nextProps.query)\n      return isPokemonsChanged || isQueryChanged\n    },\n    ({ pokemons, query, setItemSizesCache, getItemSizesCache }) => {\n      return {\n        renderItem: ({ style, index }) => {\n          const pokemon = pokemons[index]\n          return (\n            <div className=\"row\" style={{ ...style }} key={index}>\n              <Pokemon\n                pokemon={pokemon}\n                lang={query.lang}\n                onMeasure={({ height }) => setItemSizesCache(index, height)}\n              />\n            </div>\n          )\n        },\n\n        getItemSizes: () => {\n          const filled = _.fill(new Array(pokemons.length), 0)\n          const itemSizesCache = getItemSizesCache()\n          return _.merge(filled, itemSizesCache)\n        }\n      }\n    }\n  )\n)\n\n// Looks like PokeAPI does not provides `Pokemon Sun & Moon` data currently(2018/10/14) ;)\n// SEE: https://github.com/PokeAPI/pokeapi/issues/112\nconst Pokemons = (props) => {\n  const {\n    query,\n    vh,\n    pokemons,\n    draftScrollToIndex,\n    setDraftScrollToIndex,\n    setScrollToIndex,\n    scrollToIndex,\n    renderItem,\n    setListRef,\n    getItemSizes\n  } = props\n\n  // Toggle lang.\n  let nextLang = 'en'\n  if (query.lang === 'en') {\n    nextLang = 'ja'\n  } else if (query.lang === 'ja') {\n    nextLang = 'random'\n  } else if (query.lang === 'random') {\n    nextLang = 'en'\n  }\n\n  const itemCount = pokemons.length\n\n  return (\n    <>\n      <div className=\"c-search-form\">\n        <form\n          onSubmit={(e) => {\n            e.preventDefault()\n            setScrollToIndex(draftScrollToIndex)\n          }}\n        >\n          <label>\n            <span style={{ marginRight: 4 }}>No</span>\n\n            <input\n              type=\"number\"\n              onChange={setDraftScrollToIndex}\n              value={draftScrollToIndex}\n              style={{width: 40}}\n            />\n          </label>\n\n          <button\n            style={{ marginLeft: 8 }}\n            onClick={() => setScrollToIndex(draftScrollToIndex)}\n          >\n            Go\n          </button>\n        </form>\n      </div>\n\n      <VirtualList\n        // Extra props for update list on query changes.\n        lang={query.lang}\n\n        // react-tiny-virtual-list props.\n        width='100vw'\n        height={vh}\n        itemCount={itemCount}\n        renderItem={renderItem}\n        itemSize={(index) => getItemSizes()[index] || 200}\n        overscanCount={5}\n        scrollToIndex={scrollToIndex == null ? null : scrollToIndex - 1}\n        ref={setListRef}\n      />\n\n      <footer>\n        <span>\n          <Link to=\"/load-more\">/load-more</Link> |&nbsp;\n          <Link to=\"/images\">/images</Link> |&nbsp;\n          <Link to={`/pokemons?lang=${nextLang}`} style={{ marginRight: 16 }}>/pokemons?lang={nextLang}</Link>\n        </span>\n        <span className=\"c-comment\">SEE: <a href='https://pokeapi.co/' target='_blank'>PokéAPI</a> for more Pokemons!</span>\n      </footer>\n    </>\n  )\n}\n\nexport default enhance(Pokemons)","// App.js\nimport React from 'react'\nimport { hot } from 'react-hot-loader'\n\nimport Promise from '../../utils/promise'\nimport fetch from '../../utils/fetch'\n\nimport withMeasure from '../../hocs/withMeasure'\n\nimport _ from 'lodash'\n\nimport {\n  compose,\n  lifecycle,\n  withState,\n  branch,\n  renderComponent\n} from 'recompose'\n\nconst getPokemonDetail = (id) => new Promise(async (resolve) => {\n  const info = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}/`)\n\n  const speciesUrl = _.get(info, 'species.url', `https://pokeapi.co/api/v2/pokemon-species/${id}/`)\n\n  const spec = await fetch(speciesUrl)\n\n  const randomLang = _.get(_.sample(spec.names), 'language.name')\n\n  const getLocaled = (collection) => {\n    const grouped = _.groupBy(collection, 'language.name')\n    const picked = _.pick(grouped, ['ja', 'en', randomLang])\n    return _.transform(picked, (result, values, key) => {\n      result[key] = _.first(values)\n    }, {})\n  }\n\n  // Fetch attributes from response.\n  const names = getLocaled(spec.names)\n  const frontImage = _.get(info, 'sprites.front_default', null)\n  const backImage = _.get(info, 'sprites.back_default', null)\n  const flavorTexts = getLocaled(spec.flavor_text_entries)\n\n  resolve({\n    id,\n    frontImage,\n    backImage,\n    names,\n    flavorTexts,\n    randomLang\n  })\n})\n\nconst enhance = compose(\n  hot(module),\n  withMeasure,\n  withState('detail', 'setDetail', null),\n  lifecycle({\n    componentDidMount () {\n      const { pokemon, setDetail, observe } = this.props\n      // Keep promise reference for cancel.\n      this.promise = getPokemonDetail(pokemon.id).then(detail => setDetail(detail))\n    },\n\n    componentWillUnmount () {\n      if (this.promise) {\n        this.promise.cancel()\n      }\n    }\n  }),\n  branch(\n    ({ detail }) => !detail,\n    renderComponent(() => null),\n    _.identity\n  )\n)\n\nconst Pokemon = (props) => {\n  const {\n    detail = {},\n    pokemon,\n    setMeasureRef\n  } = props\n\n  const {\n    id,\n    names = {},\n    flavorTexts = {},\n    frontImage,\n    backImage\n  } = detail\n\n  const lang = props.lang === 'random' ? detail.randomLang : props.lang\n  const nameEntry = names[lang] ? names[lang] : names['en']\n  const { name } = nameEntry\n\n  const flavorTextEntry = flavorTexts[lang] ? flavorTexts[lang] : flavorTexts['en']\n  const { flavor_text, version } = flavorTextEntry\n\n  return (\n    <div ref={setMeasureRef} style={{color: 'white'}}>\n      <p style={{margin: 0}}>\n        <span style={{ background: 'white', padding: '0 8px', color: 'black' }}>\n          No.{id} name={name} lang={lang}\n        </span>\n      </p>\n\n      <a href={pokemon.url} target=\"_blank\">\n        <img src={frontImage} alt=\"\" />\n        <img src={backImage} alt=\"\" />\n      </a>\n\n      <pre style={{\n        margin: '0 0 0 8px',\n        padding: '0 0 16px',\n        wordBreak: 'break-word',\n        whiteSpace: 'pre-wrap'\n      }}>\n        {flavor_text}\n        <b>({version.name})</b>\n      </pre>\n    </div>\n  )\n}\n\nexport default enhance(Pokemon)","import Promise from 'bluebird'\n\n// Set here for enable Promise.cancel()\nPromise.config({\n  // Enable warnings\n  // warnings: true,\n  // Enable long stack traces\n  // longStackTraces: true,\n  // Enable cancellation\n  cancellation: true\n  // Enable monitoring\n  // monitoring: true\n})\n\nexport default Promise\n","import {\n  compose,\n  lifecycle,\n  withProps,\n} from 'recompose'\nimport _ from 'lodash'\n\nimport Promise from 'bluebird'\n\nimport ResizeObserver from 'resize-observer-polyfill'\n\nexport default compose(\n  withProps(({ onMeasure = _.noop }) => {\n    let ref = null\n    let unobserve = _.noop\n\n    let size = { height: 0, width: 0 }\n\n    const ro = new ResizeObserver((entries) => {\n      const {contentRect} = _.first(entries)\n      const { top, right, bottom, left, height, width } = contentRect\n      const paddingBottom = bottom - height\n      const paddingRight = right - width\n      const clientHeight = top + paddingBottom + height\n      const clientWidth = left + paddingRight + width\n\n      size = {\n        height: clientHeight,\n        width: clientWidth\n      }\n\n      onMeasure(size)\n    })\n\n    const observe = () => {\n      if (!ref) return\n      ro.observe(ref)\n\n      const imgs = ref.querySelectorAll('img')\n\n      Promise.map(imgs, (img) => new Promise((resolve) => {\n        // Resolve on each image loaded.\n        img.onload = () => resolve()\n      })).then(() => onMeasure({ ...size, isLoaded: true }))\n\n      return () => {\n        ro.unobserve(ref)\n        ref = null\n      }\n    }\n\n    return {\n      observe,\n\n      setMeasureRef: (_ref) => {\n        ref = _ref\n        unobserve = observe()\n      },\n\n      unobserve: () => {\n        unobserve()\n      }\n    }\n  }),\n  lifecycle({\n    componentWillUnmount () {\n      this.props.unobserve()\n    }\n  })\n)","import React from 'react'\nimport { hot } from 'react-hot-loader'\n\nimport { Link } from 'react-router-dom'\n\nimport _ from 'lodash'\n\nimport VirtualList from 'react-tiny-virtual-list'\n\nimport {\n  compose,\n  withHandlers,\n  withPropsOnChange,\n  withStateHandlers,\n} from 'recompose'\n\nimport mapVh from '../hocs/mapVh'\n\nconst SCROLL_DIRECTION_UP = 'SCROLL_DIRECTION_UP'\nconst SCROLL_DIRECTION_NONE = 'SCROLL_DIRECTION_NONE'\nconst SCROLL_DIRECTION_DOWN = 'SCROLL_DIRECTION_DOWN'\n\nconst VIRTUAL_ROWS_SIZE = 50\n\nconst enhance = compose(\n  hot(module),\n  mapVh,\n  withStateHandlers(\n    () => {\n      const rows = _.fill(Array(20), 1)\n      const virtualRowsCount = rows.length + VIRTUAL_ROWS_SIZE\n      return {\n        overScanCount: 3,\n        virtualRowsCount,\n        rows,\n        initialScrollToIndex: virtualRowsCount - 1\n      }\n    },\n    {\n      prependRows: (state) => (rows) => {\n        const nextRows = [...state.rows, ...rows]\n        const nextVirtualRowsCount = nextRows.length + VIRTUAL_ROWS_SIZE\n        return {\n          virtualRowsCount: nextVirtualRowsCount,\n          rows: nextRows\n        }\n      }\n    }\n  ),\n  withHandlers({\n    getVirtualIndex: ({ virtualRowsCount }) => (index) => {\n      return virtualRowsCount - index - 1\n    }\n  }),\n  withHandlers(({ overScanCount }) => {\n    let lastArg = {\n      startIndex: -1,\n      stopIndex: -1\n    }\n    let scrollDirection = SCROLL_DIRECTION_NONE\n\n    return {\n      compareScroll: () => (arg) => {\n        // Assign lastStartIndex at first render.\n        if (lastArg.startIndex === -1) lastArg.startIndex = arg.startIndex\n        // Ignore no-change.\n        if (lastArg.startIndex === arg.startIndex) return { scrollDirection: SCROLL_DIRECTION_NONE }\n\n        scrollDirection = lastArg.startIndex > arg.startIndex ? SCROLL_DIRECTION_UP : SCROLL_DIRECTION_DOWN\n\n        // Get in-visible (includes overScan) row index.\n        const currentIndex = scrollDirection === SCROLL_DIRECTION_UP ? arg.startIndex : arg.stopIndex\n        // Get visible row index.\n        const visibleCurrentIndex = scrollDirection === SCROLL_DIRECTION_UP ? (arg.startIndex + overScanCount) : (arg.stopIndex - overScanCount)\n\n        // Keep lastArg.\n        lastArg = arg\n\n        return {\n          scrollDirection,\n          currentIndex,\n          visibleCurrentIndex\n        }\n      }\n    }\n  }),\n  withPropsOnChange(\n    ['prependRows'],\n    ({ prependRows }) => ({\n      // Prevent duplicate call.\n      prependRows: _.debounce(prependRows, 300, { leading: true, trailing: false })\n    })\n  ),\n  withHandlers({\n    onLoadMore: ({ prependRows }) => ({ isAtFirst }) => {\n      if (isAtFirst) return\n      // Simulate delay of loading.\n      _.delay(() => prependRows(_.fill(Array(20), 1)), 300)\n    }\n  }),\n  withHandlers((props) => {\n    const onLoadMore = _.debounce(props.onLoadMore, 100, { leading: true })\n\n    return {\n      onItemsRendered: ({ virtualRowsCount, rows, getVirtualIndex }) => (arg) => {\n        // Swap args for reversed list.\n        const startIndex = getVirtualIndex(arg.stopIndex)\n        const stopIndex = getVirtualIndex(arg.startIndex)\n\n        const { scrollDirection, currentIndex } = props.compareScroll({ startIndex, stopIndex })\n\n        // Ignore no-change.\n        if (scrollDirection === SCROLL_DIRECTION_NONE) return\n\n        const IsAtFirstOfRows = scrollDirection === SCROLL_DIRECTION_UP && startIndex === 0\n        const IsAtLastOfRows = scrollDirection === SCROLL_DIRECTION_DOWN && stopIndex >= rows.length - 1\n\n        if (IsAtFirstOfRows || IsAtLastOfRows) {\n          onLoadMore({\n            scrollDirection,\n            currentIndex,\n            isAtFirst: IsAtFirstOfRows,\n            isAtLast: IsAtLastOfRows\n          })\n        }\n      }\n    }\n  }),\n  withPropsOnChange(\n    (props, nextProps) => {\n      return props.rows.length !== nextProps.rows.length\n    },\n    ({ rows, getVirtualIndex }) => ({\n      renderItem (arg) {\n        const { style } = arg\n\n        const index = getVirtualIndex(arg.index)\n        const row = rows[index]\n\n        return (\n          <div className=\"Row\" style={style} key={index}>\n            {row ? `Row ${index}` : 'Loading...'}\n          </div>\n        )\n      }\n    })\n  )\n)\n\nconst LoadMore = enhance((props) => {\n  const {\n    vh,\n    overScanCount,\n    virtualRowsCount,\n    initialScrollToIndex,\n    onItemsRendered,\n    renderItem\n  } = props\n\n  return (\n    <div style={{color: 'white'}}>\n      <VirtualList\n        width=\"auto\"\n        height={vh || window.innerHeight}\n        itemCount={virtualRowsCount}\n        overscanCount={overScanCount}\n        renderItem={renderItem}\n        itemSize={50}\n        scrollToIndex={initialScrollToIndex}\n        onItemsRendered={onItemsRendered}\n      />\n\n      <footer>\n        <span>\n          <Link to=\"/images\">/images</Link> |&nbsp;\n          <Link to=\"/pokemons\">/pokemons</Link>\n        </span>\n\n        <span className=\"c-comment\">Scroll up to load more(Slack-like behavior).</span>\n      </footer>\n    </div>\n  )\n})\n\nexport default LoadMore","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter, Switch, Route, Redirect } from 'react-router-dom'\n\nimport Images from './components/Images'\nimport Pokemons from './components/Pokemons'\nimport LoadMore from './components/LoadMore'\n\nconst app = (\n  <div>\n\n    { /*language=CSS*/ }\n    <style type=\"text/css\">{`\n      body {\n        background-color: #242424;\n        margin: 0;\n        font-family: menlo, \"andale mono\", \"courier new\", system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n      }\n\n      footer {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        padding: 8px;\n        background-color: white;\n        color: #242424;\n        text-align: right;\n        display: flex;\n        justify-content: flex-start;\n        flex-wrap: wrap;\n      }\n\n      img {\n          max-width: 100vw;\n      }\n\n      .c-comment {\n        margin: 8px 0 0;\n      }\n\n      .c-search-form {\n        position: fixed;\n        top: 0;\n        right: 0;\n        z-index: 100;\n        background-color: white;\n        padding: 8px;\n      }\n\n      @media (min-width: 576px) {\n        footer {\n            padding: 8px 8px 32px;\n            justify-content: space-between;\n        }\n\n        img {\n          max-width: initial;\n        }\n\n        .c-credits {\n          margin: 0;\n        }\n      }\n    `}</style>\n\n    <HashRouter>\n      <Switch>\n        <Redirect exact from='/' to='/images' />\n        <Route exact path='/images' component={Images} />\n        <Route exact path='/pokemons' component={Pokemons} />\n        <Route exact path='/load-more' component={LoadMore} />\n      </Switch>\n    </HashRouter>\n  </div>\n)\n\nReactDOM.render(app, document.querySelector('#app'))"],"sourceRoot":""}